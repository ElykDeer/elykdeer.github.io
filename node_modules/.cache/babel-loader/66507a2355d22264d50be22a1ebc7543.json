{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _defaults = _interopRequireDefault(require(\"defaults\"));\n\nvar _reactFastCompare = _interopRequireDefault(require(\"react-fast-compare\"));\n\nvar _TerminalMessage = _interopRequireDefault(require(\"./TerminalMessage\"));\n\nvar _validateCommands = _interopRequireDefault(require(\"./handlers/validateCommands\"));\n\nvar _scrollHistory = _interopRequireDefault(require(\"./handlers/scrollHistory\"));\n\nvar _parseEOL = _interopRequireDefault(require(\"./handlers/parseEOL\"));\n\nvar _Terminal = _interopRequireDefault(require(\"./defs/styles/Terminal\"));\n\nvar _Terminal2 = _interopRequireDefault(require(\"./defs/types/Terminal\"));\n\nvar _commandExists2 = _interopRequireDefault(require(\"./utils/commandExists\"));\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nvar Terminal = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(Terminal, _Component);\n\n  var _super = _createSuper(Terminal);\n\n  function Terminal(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Terminal);\n    _this = _super.call(this, props);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"focusTerminal\", function () {\n      // Only focus the terminal if text isn't being copied\n      var isTextSelected = window.getSelection().type === 'Range';\n      if (!isTextSelected) _this.terminalInput.current.focus();\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"scrollToBottom\", function () {\n      var rootNode = _this.terminalRoot.current; // This may look ridiculous, but it is necessary to decouple execution for just a millisecond in order to scroll all the way\n\n      setTimeout(function () {\n        rootNode.scrollTop = rootNode.scrollHeight;\n      }, 1);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"validateCommands\", function () {\n      var _this$props = _this.props,\n          commands = _this$props.commands,\n          noDefaults = _this$props.noDefaults,\n          ignoreCommandCase = _this$props.ignoreCommandCase;\n      var validCommands = (0, _validateCommands[\"default\"])(commands, _this.showHelp, _this.clearStdout, {\n        noDefaults: noDefaults,\n        ignoreCommandCase: ignoreCommandCase\n      });\n\n      _this.setState({\n        commands: validCommands\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"showWelcomeMessage\", function () {\n      var msg = _this.props.welcomeMessage;\n      if (typeof msg === 'boolean') _this.pushToStdout('Welcome to the React terminal! Type \\'help\\' to get a list of commands.');else if (Array.isArray(msg)) msg.map(function (item) {\n        return _this.pushToStdout(item);\n      });else _this.pushToStdout(msg);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"showHelp\", function () {\n      var commands = _this.state.commands;\n\n      for (var c in commands) {\n        var cmdObj = commands[c];\n        var usage = cmdObj.usage ? \" - \".concat(cmdObj.usage) : '';\n\n        _this.pushToStdout(\"\".concat(c, \" - \").concat(cmdObj.description).concat(usage));\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"pushToStdout\", function (message, options) {\n      var stdout = _this.state.stdout;\n      stdout.push({\n        message: message,\n        isEcho: (options === null || options === void 0 ? void 0 : options.isEcho) || false\n      });\n      /* istanbul ignore next: Covered by interactivity tests */\n\n      if (options === null || options === void 0 ? void 0 : options.rawInput) _this.pushToHistory(options.rawInput);\n\n      _this.setState({\n        stdout: stdout\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"pushToHistory\", function (rawInput) {\n      var history = _this.state.history;\n      history.push(rawInput);\n\n      _this.setState({\n        history: history,\n        historyPosition: null\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"getStdout\", function () {\n      // Parse EOL if it isn't disabled\n      var stdout = !_this.props.noNewlineParsing ? (0, _parseEOL[\"default\"])(_this.state.stdout) : _this.state.stdout;\n      return stdout.map(function (line, i) {\n        return /*#__PURE__*/_react[\"default\"].createElement(_TerminalMessage[\"default\"], {\n          key: i,\n          content: line.message,\n          dangerMode: _this.props.dangerMode,\n          className: !line.isEcho ? _this.props.messageClassName :\n          /* istanbul ignore next: Covered by interactivity tests */\n          undefined,\n          style: !line.isEcho ? _this.props.messageStyle :\n          /* istanbul ignore next: Covered by interactivity tests */\n          undefined\n        });\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"clearStdout\", function () {\n      _this.setState({\n        stdout: []\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"clearInput\", function () {\n      _this.setState({\n        historyPosition: null\n      });\n\n      _this.terminalInput.current.value = '';\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"processCommand\", function () {\n      _this.setState({\n        processing: true\n      }, function () {\n        // Initialise command result object\n        var commandResult = {\n          command: null,\n          args: [],\n          rawInput: null,\n          result: null\n        };\n        var rawInput = _this.terminalInput.current.value;\n        if (!_this.props.noHistory) _this.pushToHistory(rawInput);\n\n        if (!_this.props.noEchoBack) {\n          // Mimic native terminal by echoing command back\n          // Also exempt it from message since it should not really be a message despite behaving like one\n          // Containing it in a span to allow JSX values in the prompt label\n          var echo = /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, _this.props.promptLabel || '$', \" \", rawInput);\n\n          _this.pushToStdout(echo, {\n            isEcho: true\n          });\n        }\n\n        if (rawInput) {\n          var input = rawInput.split(' ');\n          var rawCommand = input.splice(0, 1)[0]; // Removed portion is returned...\n\n          var args = input; // ...and the rest can be used\n\n          commandResult.rawInput = rawInput;\n          commandResult.command = rawCommand;\n          commandResult.args = args;\n\n          var _commandExists = (0, _commandExists2[\"default\"])(_this.state.commands, rawCommand, _this.props.ignoreCommandCase),\n              exists = _commandExists.exists,\n              command = _commandExists.command;\n\n          if (!exists) {\n            _this.pushToStdout(_this.props.errorText ? _this.props.errorText.replace(/\\[command\\]/gi, command) : \"Command '\".concat(rawCommand, \"' not found!\"));\n          } else {\n            var cmd = _this.state.commands[command];\n            var res = cmd.fn.apply(cmd, (0, _toConsumableArray2[\"default\"])(args));\n\n            _this.pushToStdout(res);\n\n            commandResult.result = res;\n            if (cmd.explicitExec) cmd.fn.apply(cmd, (0, _toConsumableArray2[\"default\"])(args));\n          }\n        }\n\n        _this.setState({\n          processing: false\n        }, function () {\n          _this.clearInput();\n\n          if (!_this.props.noAutoScroll) _this.scrollToBottom();\n          if (_this.props.commandCallback) _this.props.commandCallback(commandResult);\n        });\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"scrollHistory\", function (direction) {\n      var _this$state = _this.state,\n          history = _this$state.history,\n          historyPosition = _this$state.historyPosition,\n          previousHistoryPosition = _this$state.previousHistoryPosition;\n      var toUpdate = (0, _scrollHistory[\"default\"])(direction, {\n        history: history,\n        historyPosition: historyPosition,\n        previousHistoryPosition: previousHistoryPosition,\n        terminalInput: _this.terminalInput\n      }); // Only update if there is something to update\n\n      if (toUpdate) _this.setState(toUpdate);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleInput\", function (event) {\n      switch (event.key) {\n        case 'Enter':\n          _this.processCommand();\n\n          break;\n\n        case 'ArrowUp':\n          _this.scrollHistory('up');\n\n          break;\n\n        case 'ArrowDown':\n          _this.scrollHistory('down');\n\n          break;\n      }\n    });\n    _this.state = {\n      commands: {},\n      stdout: [],\n      history: [],\n      historyPosition: null,\n      previousHistoryPosition: null,\n      // TODO: Add prop-controlled enable/disable on the input\n      processing: false\n    };\n    _this.terminalRoot = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.terminalInput = /*#__PURE__*/_react[\"default\"].createRef();\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Terminal, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      // If there was a change in commands, re-validate\n      if (!(0, _reactFastCompare[\"default\"])(prevProps.commands, this.props.commands)) this.validateCommands();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.validateCommands();\n      if (this.props.welcomeMessage) this.showWelcomeMessage();\n      /* istanbul ignore next: Covered by interactivity tests */\n\n      if (this.props.autoFocus) this.focusTerminal();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var styles = {\n        container: (0, _defaults[\"default\"])(this.props.style, _Terminal[\"default\"].container),\n        content: (0, _defaults[\"default\"])(this.props.contentStyle, _Terminal[\"default\"].content),\n        inputArea: (0, _defaults[\"default\"])(this.props.inputAreaStyle, _Terminal[\"default\"].inputArea),\n        promptLabel: (0, _defaults[\"default\"])(this.props.promptLabelStyle, _Terminal[\"default\"].promptLabel),\n        input: (0, _defaults[\"default\"])(this.props.inputStyle, _Terminal[\"default\"].input)\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        ref: this.terminalRoot,\n        name: \"react-console-emulator\",\n        className: this.props.className,\n        style: styles.container,\n        onClick: this.focusTerminal\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        name: \"react-console-emulator__content\",\n        className: this.props.contentClassName,\n        style: styles.content\n      }, this.getStdout(), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        name: \"react-console-emulator__inputArea\",\n        className: this.props.inputAreaClassName,\n        style: styles.inputArea\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        name: \"react-console-emulator__promptLabel\",\n        className: this.props.promptLabelClassName,\n        style: styles.promptLabel\n      }, this.props.promptLabel || '$'), /*#__PURE__*/_react[\"default\"].createElement(\"input\", {\n        ref: this.terminalInput,\n        name: \"react-console-emulator__input\",\n        className: this.props.inputClassName,\n        style: styles.input,\n        onKeyDown: this.handleInput,\n        type: \"text\",\n        autoComplete: \"off\",\n        disabled: this.props.disabled || this.props.disableOnProcess &&\n        /* istanbul ignore next: Covered by interactivity tests */\n        this.state.processing\n      }))));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return Terminal;\n}(_react.Component);\n\nexports[\"default\"] = Terminal;\n(0, _defineProperty2[\"default\"])(Terminal, \"propTypes\", _Terminal2[\"default\"]);\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Terminal, \"Terminal\", \"C:\\\\Users\\\\LWTech Gaming\\\\Code Projects\\\\react-console-emulator\\\\src\\\\Terminal.jsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/kyle/elyk.dev/node_modules/react-console-emulator/dist/Terminal.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","_toConsumableArray2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_defineProperty2","_react","_defaults","_reactFastCompare","_TerminalMessage","_validateCommands","_scrollHistory","_parseEOL","_Terminal","_Terminal2","_commandExists2","enterModule","reactHotLoaderGlobal","undefined","module","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Date","prototype","toString","call","e","__signature__","signature","a","Terminal","_Component","_super","props","_this","isTextSelected","window","getSelection","type","terminalInput","current","focus","rootNode","terminalRoot","setTimeout","scrollTop","scrollHeight","_this$props","commands","noDefaults","ignoreCommandCase","validCommands","showHelp","clearStdout","setState","msg","welcomeMessage","pushToStdout","Array","isArray","map","item","state","c","cmdObj","usage","concat","description","message","options","stdout","push","isEcho","rawInput","pushToHistory","history","historyPosition","noNewlineParsing","line","i","createElement","key","content","dangerMode","className","messageClassName","style","messageStyle","processing","commandResult","command","args","noHistory","noEchoBack","echo","promptLabel","input","split","rawCommand","splice","_commandExists","exists","errorText","replace","cmd","res","fn","explicitExec","clearInput","noAutoScroll","scrollToBottom","commandCallback","direction","_this$state","previousHistoryPosition","toUpdate","event","processCommand","scrollHistory","createRef","componentDidUpdate","prevProps","validateCommands","componentDidMount","showWelcomeMessage","autoFocus","focusTerminal","render","styles","container","contentStyle","inputArea","inputAreaStyle","promptLabelStyle","inputStyle","ref","name","onClick","contentClassName","getStdout","inputAreaClassName","promptLabelClassName","inputClassName","onKeyDown","handleInput","autoComplete","disabled","disableOnProcess","__reactstandin__regenerateByEval","code","eval","Component","reactHotLoader","default","register","leaveModule"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _defaults = _interopRequireDefault(require(\"defaults\"));\n\nvar _reactFastCompare = _interopRequireDefault(require(\"react-fast-compare\"));\n\nvar _TerminalMessage = _interopRequireDefault(require(\"./TerminalMessage\"));\n\nvar _validateCommands = _interopRequireDefault(require(\"./handlers/validateCommands\"));\n\nvar _scrollHistory = _interopRequireDefault(require(\"./handlers/scrollHistory\"));\n\nvar _parseEOL = _interopRequireDefault(require(\"./handlers/parseEOL\"));\n\nvar _Terminal = _interopRequireDefault(require(\"./defs/styles/Terminal\"));\n\nvar _Terminal2 = _interopRequireDefault(require(\"./defs/types/Terminal\"));\n\nvar _commandExists2 = _interopRequireDefault(require(\"./utils/commandExists\"));\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nvar Terminal = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(Terminal, _Component);\n\n  var _super = _createSuper(Terminal);\n\n  function Terminal(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Terminal);\n    _this = _super.call(this, props);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"focusTerminal\", function () {\n      // Only focus the terminal if text isn't being copied\n      var isTextSelected = window.getSelection().type === 'Range';\n      if (!isTextSelected) _this.terminalInput.current.focus();\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"scrollToBottom\", function () {\n      var rootNode = _this.terminalRoot.current; // This may look ridiculous, but it is necessary to decouple execution for just a millisecond in order to scroll all the way\n\n      setTimeout(function () {\n        rootNode.scrollTop = rootNode.scrollHeight;\n      }, 1);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"validateCommands\", function () {\n      var _this$props = _this.props,\n          commands = _this$props.commands,\n          noDefaults = _this$props.noDefaults,\n          ignoreCommandCase = _this$props.ignoreCommandCase;\n      var validCommands = (0, _validateCommands[\"default\"])(commands, _this.showHelp, _this.clearStdout, {\n        noDefaults: noDefaults,\n        ignoreCommandCase: ignoreCommandCase\n      });\n\n      _this.setState({\n        commands: validCommands\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"showWelcomeMessage\", function () {\n      var msg = _this.props.welcomeMessage;\n      if (typeof msg === 'boolean') _this.pushToStdout('Welcome to the React terminal! Type \\'help\\' to get a list of commands.');else if (Array.isArray(msg)) msg.map(function (item) {\n        return _this.pushToStdout(item);\n      });else _this.pushToStdout(msg);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"showHelp\", function () {\n      var commands = _this.state.commands;\n\n      for (var c in commands) {\n        var cmdObj = commands[c];\n        var usage = cmdObj.usage ? \" - \".concat(cmdObj.usage) : '';\n\n        _this.pushToStdout(\"\".concat(c, \" - \").concat(cmdObj.description).concat(usage));\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"pushToStdout\", function (message, options) {\n      var stdout = _this.state.stdout;\n      stdout.push({\n        message: message,\n        isEcho: (options === null || options === void 0 ? void 0 : options.isEcho) || false\n      });\n      /* istanbul ignore next: Covered by interactivity tests */\n\n      if (options === null || options === void 0 ? void 0 : options.rawInput) _this.pushToHistory(options.rawInput);\n\n      _this.setState({\n        stdout: stdout\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"pushToHistory\", function (rawInput) {\n      var history = _this.state.history;\n      history.push(rawInput);\n\n      _this.setState({\n        history: history,\n        historyPosition: null\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"getStdout\", function () {\n      // Parse EOL if it isn't disabled\n      var stdout = !_this.props.noNewlineParsing ? (0, _parseEOL[\"default\"])(_this.state.stdout) : _this.state.stdout;\n      return stdout.map(function (line, i) {\n        return /*#__PURE__*/_react[\"default\"].createElement(_TerminalMessage[\"default\"], {\n          key: i,\n          content: line.message,\n          dangerMode: _this.props.dangerMode,\n          className: !line.isEcho ? _this.props.messageClassName :\n          /* istanbul ignore next: Covered by interactivity tests */\n          undefined,\n          style: !line.isEcho ? _this.props.messageStyle :\n          /* istanbul ignore next: Covered by interactivity tests */\n          undefined\n        });\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"clearStdout\", function () {\n      _this.setState({\n        stdout: []\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"clearInput\", function () {\n      _this.setState({\n        historyPosition: null\n      });\n\n      _this.terminalInput.current.value = '';\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"processCommand\", function () {\n      _this.setState({\n        processing: true\n      }, function () {\n        // Initialise command result object\n        var commandResult = {\n          command: null,\n          args: [],\n          rawInput: null,\n          result: null\n        };\n        var rawInput = _this.terminalInput.current.value;\n        if (!_this.props.noHistory) _this.pushToHistory(rawInput);\n\n        if (!_this.props.noEchoBack) {\n          // Mimic native terminal by echoing command back\n          // Also exempt it from message since it should not really be a message despite behaving like one\n          // Containing it in a span to allow JSX values in the prompt label\n          var echo = /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, _this.props.promptLabel || '$', \" \", rawInput);\n\n          _this.pushToStdout(echo, {\n            isEcho: true\n          });\n        }\n\n        if (rawInput) {\n          var input = rawInput.split(' ');\n          var rawCommand = input.splice(0, 1)[0]; // Removed portion is returned...\n\n          var args = input; // ...and the rest can be used\n\n          commandResult.rawInput = rawInput;\n          commandResult.command = rawCommand;\n          commandResult.args = args;\n\n          var _commandExists = (0, _commandExists2[\"default\"])(_this.state.commands, rawCommand, _this.props.ignoreCommandCase),\n              exists = _commandExists.exists,\n              command = _commandExists.command;\n\n          if (!exists) {\n            _this.pushToStdout(_this.props.errorText ? _this.props.errorText.replace(/\\[command\\]/gi, command) : \"Command '\".concat(rawCommand, \"' not found!\"));\n          } else {\n            var cmd = _this.state.commands[command];\n            var res = cmd.fn.apply(cmd, (0, _toConsumableArray2[\"default\"])(args));\n\n            _this.pushToStdout(res);\n\n            commandResult.result = res;\n            if (cmd.explicitExec) cmd.fn.apply(cmd, (0, _toConsumableArray2[\"default\"])(args));\n          }\n        }\n\n        _this.setState({\n          processing: false\n        }, function () {\n          _this.clearInput();\n\n          if (!_this.props.noAutoScroll) _this.scrollToBottom();\n          if (_this.props.commandCallback) _this.props.commandCallback(commandResult);\n        });\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"scrollHistory\", function (direction) {\n      var _this$state = _this.state,\n          history = _this$state.history,\n          historyPosition = _this$state.historyPosition,\n          previousHistoryPosition = _this$state.previousHistoryPosition;\n      var toUpdate = (0, _scrollHistory[\"default\"])(direction, {\n        history: history,\n        historyPosition: historyPosition,\n        previousHistoryPosition: previousHistoryPosition,\n        terminalInput: _this.terminalInput\n      }); // Only update if there is something to update\n\n      if (toUpdate) _this.setState(toUpdate);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleInput\", function (event) {\n      switch (event.key) {\n        case 'Enter':\n          _this.processCommand();\n\n          break;\n\n        case 'ArrowUp':\n          _this.scrollHistory('up');\n\n          break;\n\n        case 'ArrowDown':\n          _this.scrollHistory('down');\n\n          break;\n      }\n    });\n    _this.state = {\n      commands: {},\n      stdout: [],\n      history: [],\n      historyPosition: null,\n      previousHistoryPosition: null,\n      // TODO: Add prop-controlled enable/disable on the input\n      processing: false\n    };\n    _this.terminalRoot = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.terminalInput = /*#__PURE__*/_react[\"default\"].createRef();\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Terminal, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      // If there was a change in commands, re-validate\n      if (!(0, _reactFastCompare[\"default\"])(prevProps.commands, this.props.commands)) this.validateCommands();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.validateCommands();\n      if (this.props.welcomeMessage) this.showWelcomeMessage();\n      /* istanbul ignore next: Covered by interactivity tests */\n\n      if (this.props.autoFocus) this.focusTerminal();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var styles = {\n        container: (0, _defaults[\"default\"])(this.props.style, _Terminal[\"default\"].container),\n        content: (0, _defaults[\"default\"])(this.props.contentStyle, _Terminal[\"default\"].content),\n        inputArea: (0, _defaults[\"default\"])(this.props.inputAreaStyle, _Terminal[\"default\"].inputArea),\n        promptLabel: (0, _defaults[\"default\"])(this.props.promptLabelStyle, _Terminal[\"default\"].promptLabel),\n        input: (0, _defaults[\"default\"])(this.props.inputStyle, _Terminal[\"default\"].input)\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        ref: this.terminalRoot,\n        name: \"react-console-emulator\",\n        className: this.props.className,\n        style: styles.container,\n        onClick: this.focusTerminal\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        name: \"react-console-emulator__content\",\n        className: this.props.contentClassName,\n        style: styles.content\n      }, this.getStdout(), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        name: \"react-console-emulator__inputArea\",\n        className: this.props.inputAreaClassName,\n        style: styles.inputArea\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        name: \"react-console-emulator__promptLabel\",\n        className: this.props.promptLabelClassName,\n        style: styles.promptLabel\n      }, this.props.promptLabel || '$'), /*#__PURE__*/_react[\"default\"].createElement(\"input\", {\n        ref: this.terminalInput,\n        name: \"react-console-emulator__input\",\n        className: this.props.inputClassName,\n        style: styles.input,\n        onKeyDown: this.handleInput,\n        type: \"text\",\n        autoComplete: \"off\",\n        disabled: this.props.disabled || this.props.disableOnProcess &&\n        /* istanbul ignore next: Covered by interactivity tests */\n        this.state.processing\n      }))));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return Terminal;\n}(_react.Component);\n\nexports[\"default\"] = Terminal;\n(0, _defineProperty2[\"default\"])(Terminal, \"propTypes\", _Terminal2[\"default\"]);\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Terminal, \"Terminal\", \"C:\\\\Users\\\\LWTech Gaming\\\\Code Projects\\\\react-console-emulator\\\\src\\\\Terminal.jsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();"]},"metadata":{},"sourceType":"script"}